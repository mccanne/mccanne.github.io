function log(a){if(1){console.log(a)}return(a)}var day_of_week={0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"};var month_of_year={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"};function day_postfix(a){if((a>=4&&a<=20)||(a>=24&&a<=30)){return"th"}m=a%10;if(m==1){return"st"}if(m==2){return"nd"}return"rd"}function friendly_date(b){var a=b.getDate();return day_of_week[b.getDay()]+"-"+a+day_postfix(a)}function weekday(b){var a=b.getDate();return day_of_week[b.getDay()]}function friendly_date2(a){return day_of_week[a.getDay()]+" "+month_of_year[a.getMonth()]+" "+a.getDate()}function friendly_date3(a){return(a.getMonth()+1)+"/"+a.getDate()+"/"+a.getFullYear()}function friendly_date4(a){return(a.getMonth()+1)+"/"+a.getDate()}function first_of_months_between(f,a){var c=[];var e=f.getMonth()+1;var b=f.getYear();var g=midnight(new Date(e+"/1/"+b));while(g<=a){if(g>=f){c.push(g)}g=d3.time.month.offset(g,1)}return c}function hsvToRgb(j,w,o){var a,k,n;var e=Math.floor(j*6);var l=j*6-e;var d=o*(1-w);var c=o*(1-l*w);var u=o*(1-(1-l)*w);switch(e%6){case 0:a=o,k=u,n=d;break;case 1:a=c,k=o,n=d;break;case 2:a=d,k=o,n=u;break;case 3:a=d,k=c,n=o;break;case 4:a=u,k=d,n=o;break;case 5:a=o,k=d,n=c;break}return[a*255,k*255,n*255]}function format_time(e){var c=e.getHours();var a=e.getMinutes();if(a<10){a="0"+a}var b;if(c==12){b="pm"}else{if(c>12){b="pm";c-=12}else{if(c==0){c=12}b="am"}}return c+":"+a+b}function format_time_bg_data(a){return Math.round(a.y)+" @ "+format_time(a.x)+" "+friendly_date(a.x)}function format_time_insulin_data(a){return parseFloat(a.y)+"u @ "+format_time(a.x)}function format_time_ihigh_data(b,c){var d=110;var a=Math.round((b.y-d)/c.y);return"ISF "+a+" = ("+Math.round(b.y)+" - "+d+") / "+parseFloat(c.y)+"u"}function format_time_carb_cover(d,e){var c=d.y;var b=e.y;var a=c/b;if(a<10){a=Math.round(10*a)/10}else{a=Math.round(a)}return"I:C "+a}function format_time_basal_data(d,a){var b=d.x;var c=a.x;s=parseFloat(d.y)+"u/hr "+format_time(b)+" to "+format_time(c);return s}function format_time_carb_data(a){return Math.round(a.y)+"g @ "+format_time(a.x)}function bg_to_class(a){if(a<80){return"low"}if(a<140){return"green"}if(a<180){return"yellow"}return"high";if(a<50){return"low-urgent"}if(a<60){return"low-attention"}if(a<70){return"low"}if(a<180){return"neutral"}if(a<250){return"high"}if(a<300){return"high-attention"}return"high-urgent"}function bg_to_simple_color(e){var d,c,a;if(e<80){return"blue"}if(e<140){return"#24c72c";return"#3ca845"}if(e<180){return"yellow";return"#f2ee6b"}return"red"}function bg_to_simple_color2(e){var d,c,a;if(e<80){return"blue"}if(e<140){return"#24c72c";return"#3ca845"}if(e<180){return"yellow";return"#f2ee6b"}if(e>=350){return d3.rgb(255,0,255)}return"red"}function bg_to_color(g){var f,e,a;if(g<80){var c=(g-40)/(80-40);if(c<0){c=0}var d=d3.scale.pow().exponent(2).range([240/360,120/360]);f=d(c);e=1-c*0.3;a=0.9}else{if(g<250){var c=(g-80)/(250-80);if(c<0){c=0}var d=d3.scale.pow().exponent(0.5).range([120/360,0/360]);f=d(c);e=0.7;a=0.9}else{if(g>=300){return d3.rgb(255,0,255)}var c=(g-250)/(300-250);if(c<0){c=0}f=0;e=0.7+c*0.28;a=0.9+c*0.1}}rgb=hsvToRgb(f,e,a);return d3.rgb(rgb[0],rgb[1],rgb[2])}function bg_to_radius(a){if(a<70){a=70}if(a>350){a=350}return 6+Math.sqrt((a-70)/550*70)}function midnight(a){return d3.time.day(a)}function noon(a){return d3.time.hour.offset(midnight(a),12)}function days_between(d,a){var c=midnight(a).getTime()-midnight(d).getTime();var b=c/(1000*24*3600);return b}function get_hour(b){var a=b.getTime()-midnight(b).getTime();return a/(1000*60*60)}function add_days(a,c){var b=new Date;b.setTime(a.getTime()+c*1000*24*3600);return b}var daylight=[0,1,2,3,4,5,9,14,16,17,18,20,22,20,18,17,16,14,9,5,4,3,2,1];function hour_to_string(a){var b=Math.round(a)%24;if(b<=0){return"midnight"}if(b<12){return b+"am"}if(b>12){return(b-12)+"pm"}return"noon"}function hour_to_color(c){var a=150;var b=20;weight=daylight[Math.floor(c)]/24;var d=Math.floor(weight*(a-b))+b;return d3.rgb(d,d,d)}function limit(c,a,b){if(c>b){return b}if(c<a){return a}return c}function fmt_translate(a,b){return"translate("+a+","+b+")"};